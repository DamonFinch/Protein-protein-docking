
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Generate Data &#8212; DeepRank 0.1 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Deep learning" href="deeprank.learn.html" />
    <link rel="prev" title="Advanced Tutorial" href="advTuto.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="deeprank.learn.html" title="Deep learning"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="advTuto.html" title="Advanced Tutorial"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">DeepRank 0.1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-deeprank.generate">
<span id="generate-data"></span><h1>Generate Data<a class="headerlink" href="#module-deeprank.generate" title="Permalink to this headline">Â¶</a></h1>
<p>This module contains all the tools to compute the features and targets and to map the features onto a grid of points. The main class used for the data generation is <code class="docutils literal"><span class="pre">deeprank.generate.DataGenerator</span></code>. Through this class you can specify the molecules you want to consider, the features and the targets that need to be computed and the way to map the features on the grid. The data is stored in a single HDF5 file. In this file, each conformation has its own group that contains all the information related to the conformation. This includes, the pdb data, the value of the feature (in human readable format and xyz-val format), the value of the targe values, the grid points and the mapped features on the grid.</p>
<p>At the moment a number of features are already implemented. This inculde:</p>
<blockquote>
<div><ul class="simple">
<li>Atomic densities</li>
<li>Coulomb &amp; vd Waals interactions</li>
<li>Atomic charges</li>
<li>PSSM data</li>
<li>Information content</li>
<li>Burried surface area</li>
<li>Contact Residue Densities</li>
</ul>
</div></blockquote>
<p>More features can be easily implemented and integrated in the data generation workflow. You can see example here: <span class="xref std std-ref">_ref_own_feature</span>. The calculation of a number of target values have also been implemented:</p>
<blockquote>
<div><ul class="simple">
<li>i-RMSD</li>
<li>l-RMSD</li>
<li>FNAT</li>
<li>DockQ</li>
<li>binary class</li>
<li>Haddock score</li>
</ul>
</div></blockquote>
<p>There as well new targets can be implemented and integrated to the workflow.</p>
<p>Normalization of the data can be time consuming as the dataset becomes large. As an attempt to alleviate this problem, the class <code class="docutils literal"><span class="pre">deeprank.generate.NormalizeData</span></code> has been created. This class directly compute and store the standard deviation and mean value of each feature within a given hdf5 file.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">deeprank.generate</span> <span class="k">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pdb_source</span>     <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;./1AK4/decoys/&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pdb_native</span>     <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;./1AK4/native/&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">h5file</span> <span class="o">=</span> <span class="s1">&#39;1ak4.hdf5&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#init the data assembler</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">database</span> <span class="o">=</span> <span class="n">DataGenerator</span><span class="p">(</span><span class="n">pdb_source</span><span class="o">=</span><span class="n">pdb_source</span><span class="p">,</span><span class="n">pdb_native</span><span class="o">=</span><span class="n">pdb_native</span><span class="p">,</span><span class="n">data_augmentation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                         <span class="n">compute_targets</span>  <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;deeprank.targets.dockQ&#39;</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>                         <span class="n">compute_features</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;deeprank.features.AtomicFeature&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                                             <span class="s1">&#39;deeprank.features.NaivePSSM&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                                             <span class="s1">&#39;deeprank.features.PSSM_IC&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                                             <span class="s1">&#39;deeprank.features.BSA&#39;</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>                         <span class="n">hdf5</span><span class="o">=</span><span class="n">h5file</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#create new files</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">database</span><span class="o">.</span><span class="n">create_database</span><span class="p">(</span><span class="n">prog_bar</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># map the features</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">grid_info</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="s1">&#39;number_of_points&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="s1">&#39;resolution&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="mf">1.</span><span class="p">,</span><span class="mf">1.</span><span class="p">,</span><span class="mf">1.</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="s1">&#39;atomic_densities&#39;</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;CA&#39;</span><span class="p">:</span><span class="mf">3.5</span><span class="p">,</span><span class="s1">&#39;N&#39;</span><span class="p">:</span><span class="mf">3.5</span><span class="p">,</span><span class="s1">&#39;O&#39;</span><span class="p">:</span><span class="mf">3.5</span><span class="p">,</span><span class="s1">&#39;C&#39;</span><span class="p">:</span><span class="mf">3.5</span><span class="p">},</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">database</span><span class="o">.</span><span class="n">map_features</span><span class="p">(</span><span class="n">grid_info</span><span class="p">,</span><span class="n">try_sparse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">time</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">prog_bar</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># add a new target</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">database</span><span class="o">.</span><span class="n">add_target</span><span class="p">(</span><span class="n">prog_bar</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="o">*</span><span class="mi">25</span> <span class="o">+</span> <span class="s1">&#39;--&gt; Done in </span><span class="si">%f</span><span class="s1"> s.&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">t0</span><span class="p">))</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># get the normalization</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">norm</span> <span class="o">=</span> <span class="n">NormalizeData</span><span class="p">(</span><span class="n">h5file</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">norm</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</pre></div>
</div>
<p>The details of the different submodule are listed here. The only module that really needs to be used is <code class="docutils literal"><span class="pre">DataGenerator</span></code> and <code class="docutils literal"><span class="pre">NormalizeData</span></code>. The <code class="docutils literal"><span class="pre">GridTools</span></code> class should not be directly used by inexperienced users.</p>
<div class="section" id="module-deeprank.generate.DataGenerator">
<span id="datagenerator"></span><h2>DataGenerator<a class="headerlink" href="#module-deeprank.generate.DataGenerator" title="Permalink to this headline">Â¶</a></h2>
<dl class="function">
<dt id="deeprank.generate.DataGenerator.printif">
<code class="descclassname">deeprank.generate.DataGenerator.</code><code class="descname">printif</code><span class="sig-paren">(</span><em>string</em>, <em>cond</em><span class="sig-paren">)</span><a class="headerlink" href="#deeprank.generate.DataGenerator.printif" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="deeprank.generate.DataGenerator.DataGenerator">
<em class="property">class </em><code class="descclassname">deeprank.generate.DataGenerator.</code><code class="descname">DataGenerator</code><span class="sig-paren">(</span><em>pdb_select=None</em>, <em>pdb_source=None</em>, <em>pdb_native=None</em>, <em>compute_targets=None</em>, <em>compute_features=None</em>, <em>data_augmentation=None</em>, <em>hdf5='database.h5'</em>, <em>logger=None</em>, <em>debug=True</em><span class="sig-paren">)</span><a class="headerlink" href="#deeprank.generate.DataGenerator.DataGenerator" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Generates the data (features/targets/maps) required for deeprank.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pdb_select</strong> (<em>list</em><em>(</em><em>str</em><em>)</em><em>, </em><em>optional</em>) â List of individual conformation for mapping</li>
<li><strong>pdb_source</strong> (<em>list</em><em>(</em><em>str</em><em>)</em><em>, </em><em>optional</em>) â List of folders where to find the pdbs for mapping</li>
<li><strong>pdb_native</strong> (<em>list</em><em>(</em><em>str</em><em>)</em><em>, </em><em>optional</em>) â List of folders where to find the native comformations</li>
<li><strong>compute_targets</strong> (<em>list</em><em>(</em><em>str</em><em>)</em><em>, </em><em>optional</em>) â List of python files computing the features</li>
<li><strong>compute_features</strong> (<em>list</em><em>(</em><em>str</em><em>)</em><em>, </em><em>optional</em>) â List of python files computing the features</li>
<li><strong>data_augmentation</strong> (<em>int</em><em>, </em><em>optional</em>) â Number of rotation performed one each complex</li>
<li><strong>hdf5</strong> (<em>str</em><em>, </em><em>optional</em>) â name of the hdf5 file where the data is saved</li>
<li><strong>logger</strong> (<em>None</em><em>, </em><em>optional</em>) â logger file</li>
<li><strong>debug</strong> (<em>bool</em><em>, </em><em>optional</em>) â print debuf info</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">NotADirectoryError</span></code> â if the source are not found</p>
</td>
</tr>
</tbody>
</table>
<p>Example :</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">deeprank.generate</span> <span class="k">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># sources to assemble the data base</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pdb_source</span>     <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;./1AK4/decoys/&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pdb_native</span>     <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;./1AK4/native/&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">h5file</span> <span class="o">=</span> <span class="s1">&#39;1ak4.hdf5&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#init the data assembler</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">database</span> <span class="o">=</span> <span class="n">DataGenerator</span><span class="p">(</span><span class="n">pdb_source</span><span class="o">=</span><span class="n">pdb_source</span><span class="p">,</span><span class="n">pdb_native</span><span class="o">=</span><span class="n">pdb_native</span><span class="p">,</span><span class="n">data_augmentation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                         <span class="n">compute_targets</span>  <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;deeprank.targets.dockQ&#39;</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>                         <span class="n">compute_features</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;deeprank.features.AtomicFeature&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                                             <span class="s1">&#39;deeprank.features.NaivePSSM&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                                             <span class="s1">&#39;deeprank.features.PSSM_IC&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                                             <span class="s1">&#39;deeprank.features.BSA&#39;</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>                         <span class="n">hdf5</span><span class="o">=</span><span class="n">h5file</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="deeprank.generate.DataGenerator.DataGenerator.create_database">
<code class="descname">create_database</code><span class="sig-paren">(</span><em>verbose=False</em>, <em>remove_error=True</em>, <em>prog_bar=False</em><span class="sig-paren">)</span><a class="headerlink" href="#deeprank.generate.DataGenerator.DataGenerator.create_database" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Create the hdf5 file architecture and compute the features/targets.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>verbose</strong> (<em>bool</em><em>, </em><em>optional</em>) â Print creation details</li>
<li><strong>remove_error</strong> (<em>bool</em><em>, </em><em>optional</em>) â remove the groups that errored</li>
<li><strong>prog_bar</strong> (<em>bool</em><em>, </em><em>optional</em>) â use tqdm</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> â If creation of the group errored.</p>
</td>
</tr>
</tbody>
</table>
<p>Example :</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># sources to assemble the data base</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pdb_source</span>     <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;./1AK4/decoys/&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pdb_native</span>     <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;./1AK4/native/&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">h5file</span> <span class="o">=</span> <span class="s1">&#39;1ak4.hdf5&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#init the data assembler</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">database</span> <span class="o">=</span> <span class="n">DataGenerator</span><span class="p">(</span><span class="n">pdb_source</span><span class="o">=</span><span class="n">pdb_source</span><span class="p">,</span><span class="n">pdb_native</span><span class="o">=</span><span class="n">pdb_native</span><span class="p">,</span><span class="n">data_augmentation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                         <span class="n">compute_targets</span>  <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;deeprank.targets.dockQ&#39;</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>                         <span class="n">compute_features</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;deeprank.features.AtomicFeature&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                                             <span class="s1">&#39;deeprank.features.NaivePSSM&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                                             <span class="s1">&#39;deeprank.features.PSSM_IC&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                                             <span class="s1">&#39;deeprank.features.BSA&#39;</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>                         <span class="n">hdf5</span><span class="o">=</span><span class="n">h5file</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#create new files</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">database</span><span class="o">.</span><span class="n">create_database</span><span class="p">(</span><span class="n">prog_bar</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="deeprank.generate.DataGenerator.DataGenerator.add_feature">
<code class="descname">add_feature</code><span class="sig-paren">(</span><em>prog_bar=True</em><span class="sig-paren">)</span><a class="headerlink" href="#deeprank.generate.DataGenerator.DataGenerator.add_feature" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Add a feature to an existing hdf5 file</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>prog_bar</strong> (<em>bool</em><em>, </em><em>optional</em>) â use tqdm</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">h5file</span> <span class="o">=</span> <span class="s1">&#39;1ak4.hdf5&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#init the data assembler</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">database</span> <span class="o">=</span> <span class="n">DataGenerator</span><span class="p">(</span><span class="n">compute_features</span>  <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;deeprank.features.ResidueDensity&#39;</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>                         <span class="n">hdf5</span><span class="o">=</span><span class="n">h5file</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">database</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">prog_bar</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="deeprank.generate.DataGenerator.DataGenerator.add_unique_target">
<code class="descname">add_unique_target</code><span class="sig-paren">(</span><em>targdict</em><span class="sig-paren">)</span><a class="headerlink" href="#deeprank.generate.DataGenerator.DataGenerator.add_unique_target" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Add identical targets for all the complexes in the datafile.</p>
<p>This is usefull if you want to add the binary class of all the complexes
created from decoys or natives</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>targdict</strong> (<em>dict</em>) â Example : {âDOCKQâ:1.0}</td>
</tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">database</span> <span class="o">=</span> <span class="n">DataGenerator</span><span class="p">(</span><span class="n">hdf5</span><span class="o">=</span><span class="s1">&#39;1ak4.hdf5&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">database</span><span class="o">.</span><span class="n">add_unique_target</span><span class="p">({</span><span class="s1">&#39;DOCKQ&#39;</span><span class="p">:</span><span class="mf">1.0</span><span class="p">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="deeprank.generate.DataGenerator.DataGenerator.add_target">
<code class="descname">add_target</code><span class="sig-paren">(</span><em>prog_bar=False</em><span class="sig-paren">)</span><a class="headerlink" href="#deeprank.generate.DataGenerator.DataGenerator.add_target" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Add a target to an existing hdf5 file</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>prog_bar</strong> (<em>bool</em><em>, </em><em>optional</em>) â Use tqdm</td>
</tr>
</tbody>
</table>
<p>Example :</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">h5file</span> <span class="o">=</span> <span class="s1">&#39;1ak4.hdf5&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#init the data assembler</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">database</span> <span class="o">=</span> <span class="n">DataGenerator</span><span class="p">(</span><span class="n">compute_targets</span> <span class="o">=</span><span class="p">[</span><span class="s1">&#39;deeprank.targets.binary_class&#39;</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>                         <span class="n">hdf5</span><span class="o">=</span><span class="n">h5file</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">database</span><span class="o">.</span><span class="n">add_target</span><span class="p">(</span><span class="n">prog_bar</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="deeprank.generate.DataGenerator.DataGenerator.map_features">
<code class="descname">map_features</code><span class="sig-paren">(</span><em>grid_info</em>, <em>cuda=False</em>, <em>gpu_block=None</em>, <em>cuda_kernel='/kernel_map.c'</em>, <em>cuda_func_name='gaussian'</em>, <em>try_sparse=True</em>, <em>reset=False</em>, <em>use_tmpdir=False</em>, <em>time=False</em>, <em>prog_bar=True</em>, <em>grid_prog_bar=False</em>, <em>remove_error=True</em><span class="sig-paren">)</span><a class="headerlink" href="#deeprank.generate.DataGenerator.DataGenerator.map_features" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Map the feature on a grid of points centered at the interface</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>grid_info</strong> (<em>dict</em>) â Informaton for the grid see deeprank.generate.GridTool.py for details</li>
<li><strong>cuda</strong> (<em>bool</em><em>, </em><em>optional</em>) â Use CUDA</li>
<li><strong>gpu_block</strong> (<em>None</em><em>, </em><em>optional</em>) â GPU block size to be used</li>
<li><strong>cuda_kernel</strong> (<em>str</em><em>, </em><em>optional</em>) â filename containing CUDA kernel</li>
<li><strong>cuda_func_name</strong> (<em>str</em><em>, </em><em>optional</em>) â The name of the function in the kernel</li>
<li><strong>try_sparse</strong> (<em>bool</em><em>, </em><em>optional</em>) â Try to save the grids as sparse format</li>
<li><strong>reset</strong> (<em>bool</em><em>, </em><em>optional</em>) â remove grids if some are already present</li>
<li><strong>use_tmpdir</strong> (<em>bool</em><em>, </em><em>optional</em>) â use a scratch directory</li>
<li><strong>time</strong> (<em>bool</em><em>, </em><em>optional</em>) â time the mapping process</li>
<li><strong>prog_bar</strong> (<em>bool</em><em>, </em><em>optional</em>) â use tqdm for each molecule</li>
<li><strong>grid_prog_bar</strong> (<em>bool</em><em>, </em><em>optional</em>) â use tqdm for each grid</li>
<li><strong>remove_error</strong> (<em>bool</em><em>, </em><em>optional</em>) â remove the data that errored</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Example :</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1">#init the data assembler</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">database</span> <span class="o">=</span> <span class="n">DataGenerator</span><span class="p">(</span><span class="n">hdf5</span><span class="o">=</span><span class="s1">&#39;1ak4.hdf5&#39;</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># map the features</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">grid_info</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="s1">&#39;number_of_points&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="s1">&#39;resolution&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="mf">1.</span><span class="p">,</span><span class="mf">1.</span><span class="p">,</span><span class="mf">1.</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="s1">&#39;atomic_densities&#39;</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;CA&#39;</span><span class="p">:</span><span class="mf">3.5</span><span class="p">,</span><span class="s1">&#39;N&#39;</span><span class="p">:</span><span class="mf">3.5</span><span class="p">,</span><span class="s1">&#39;O&#39;</span><span class="p">:</span><span class="mf">3.5</span><span class="p">,</span><span class="s1">&#39;C&#39;</span><span class="p">:</span><span class="mf">3.5</span><span class="p">},</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">}</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">database</span><span class="o">.</span><span class="n">map_features</span><span class="p">(</span><span class="n">grid_info</span><span class="p">,</span><span class="n">try_sparse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">time</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">prog_bar</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="deeprank.generate.DataGenerator.DataGenerator.remove">
<code class="descname">remove</code><span class="sig-paren">(</span><em>feature=True</em>, <em>pdb=True</em>, <em>points=True</em>, <em>grid=False</em><span class="sig-paren">)</span><a class="headerlink" href="#deeprank.generate.DataGenerator.DataGenerator.remove" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Remove data from the data set.</p>
<p>Equivalent to the cleandata command line tool. Once the data has been
removed from the file it is impossible to add new features/targets</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>feature</strong> (<em>bool</em><em>, </em><em>optional</em>) â Remove the features</li>
<li><strong>pdb</strong> (<em>bool</em><em>, </em><em>optional</em>) â Remove the pdbs</li>
<li><strong>points</strong> (<em>bool</em><em>, </em><em>optional</em>) â remove teh grid points</li>
<li><strong>grid</strong> (<em>bool</em><em>, </em><em>optional</em>) â remove the maps</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-deeprank.generate.NormalizeData">
<span id="normalizedata"></span><h2>NormalizeData<a class="headerlink" href="#module-deeprank.generate.NormalizeData" title="Permalink to this headline">Â¶</a></h2>
<dl class="class">
<dt id="deeprank.generate.NormalizeData.NormalizeData">
<em class="property">class </em><code class="descclassname">deeprank.generate.NormalizeData.</code><code class="descname">NormalizeData</code><span class="sig-paren">(</span><em>fname</em>, <em>shape=None</em><span class="sig-paren">)</span><a class="headerlink" href="#deeprank.generate.NormalizeData.NormalizeData" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Compute the normalization factor for the features and targets of a given HDF5 file.</p>
<p>The normalization of the features is done through the NormParam class that assumes gaussian distribution.
Hence the Normalized data should be normally distributed with a 0 mean value and 1 standard deviation.
The normalization of the targets is done vian a min/max normalization. As a result the normalized targets
should all lie between 0 and 1.</p>
<p>By default the output file containing the normalization dictionary is called &lt;hdf5name&gt;_norm.pckl</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>fname</strong> (<em>str</em>) â name of the hdf5 file</li>
<li><strong>shape</strong> (<em>tuple</em><em>(</em><em>int</em><em>)</em><em>, </em><em>optional</em>) â shape of the grid in the hdf5 file</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">norm</span> <span class="o">=</span> <span class="n">NormalizeData</span><span class="p">(</span><span class="s1">&#39;1ak5.hdf5&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">norm</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</pre></div>
</div>
<dl class="method">
<dt id="deeprank.generate.NormalizeData.NormalizeData.get">
<code class="descname">get</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#deeprank.generate.NormalizeData.NormalizeData.get" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get the normalization and write them to file.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="deeprank.generate.NormalizeData.NormParam">
<em class="property">class </em><code class="descclassname">deeprank.generate.NormalizeData.</code><code class="descname">NormParam</code><span class="sig-paren">(</span><em>std=0</em>, <em>mean=0</em>, <em>var=0</em>, <em>sqmean=0</em><span class="sig-paren">)</span><a class="headerlink" href="#deeprank.generate.NormalizeData.NormParam" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Compute gaussian normalization for a given feature.</p>
<p>This class allows to extract the standard deviation, mean value, variance and square root of the
mean value of a mapped feature stored in the hdf5 file. As the entire data set is too large to fit in memory,
the standard deviation of a given feature is calculated from the std of all the individual grids. This is done following:
<a class="reference external" href="https://stats.stackexchange.com/questions/25848/how-to-sum-a-standard-deviation">https://stats.stackexchange.com/questions/25848/how-to-sum-a-standard-deviation</a>:</p>
<div class="math">
\[\sigma_{tot}=\sqrt{\frac{1}{N}\sum_i \sigma_i^2+\frac{1}{N}\sum_i\mu_i^2-(\frac{1}{N}\sum_i\mu_i)^2}\]</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>std</strong> (<em>float</em><em>, </em><em>optional</em>) â standard deviation</li>
<li><strong>mean</strong> (<em>float</em><em>,</em><em>optional</em>) â mean value</li>
<li><strong>var</strong> (<em>float</em><em>,</em><em>optional</em>) â variance</li>
<li><strong>sqmean</strong> (<em>float</em><em>, </em><em>optional</em>) â square roo of the variance</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="deeprank.generate.NormalizeData.NormParam.add">
<code class="descname">add</code><span class="sig-paren">(</span><em>mean</em>, <em>var</em><span class="sig-paren">)</span><a class="headerlink" href="#deeprank.generate.NormalizeData.NormParam.add" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Add the mean value, sqmean and variance of a new molecule to the corresponding attributes.</p>
</dd></dl>

<dl class="method">
<dt id="deeprank.generate.NormalizeData.NormParam.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>n</em><span class="sig-paren">)</span><a class="headerlink" href="#deeprank.generate.NormalizeData.NormParam.process" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Compute the standard deviation of the ensemble.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="deeprank.generate.NormalizeData.MinMaxParam">
<em class="property">class </em><code class="descclassname">deeprank.generate.NormalizeData.</code><code class="descname">MinMaxParam</code><span class="sig-paren">(</span><em>minv=None</em>, <em>maxv=None</em><span class="sig-paren">)</span><a class="headerlink" href="#deeprank.generate.NormalizeData.MinMaxParam" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Compute the min/max of an ensenble of data.</p>
<p>This is principally used to normalized the target values</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>minv</strong> (<em>float</em><em>, </em><em>optional</em>) â minimal value</li>
<li><strong>maxv</strong> (<em>float</em><em>, </em><em>optional</em>) â maximal value</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="deeprank.generate.NormalizeData.MinMaxParam.update">
<code class="descname">update</code><span class="sig-paren">(</span><em>val</em><span class="sig-paren">)</span><a class="headerlink" href="#deeprank.generate.NormalizeData.MinMaxParam.update" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-deeprank.generate.GridTools">
<span id="gridtools"></span><h2>GridTools<a class="headerlink" href="#module-deeprank.generate.GridTools" title="Permalink to this headline">Â¶</a></h2>
<dl class="function">
<dt id="deeprank.generate.GridTools.printif">
<code class="descclassname">deeprank.generate.GridTools.</code><code class="descname">printif</code><span class="sig-paren">(</span><em>string</em>, <em>cond</em><span class="sig-paren">)</span><a class="headerlink" href="#deeprank.generate.GridTools.printif" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="deeprank.generate.GridTools.GridTools">
<em class="property">class </em><code class="descclassname">deeprank.generate.GridTools.</code><code class="descname">GridTools</code><span class="sig-paren">(</span><em>molgrp</em>, <em>number_of_points=30</em>, <em>resolution=1.0</em>, <em>atomic_densities=None</em>, <em>atomic_densities_mode='ind'</em>, <em>feature=None</em>, <em>feature_mode='ind'</em>, <em>contact_distance=8.5</em>, <em>hdf5_file=None</em>, <em>cuda=False</em>, <em>gpu_block=None</em>, <em>cuda_func=None</em>, <em>cuda_atomic=None</em>, <em>prog_bar=False</em>, <em>time=False</em>, <em>try_sparse=True</em>, <em>logger=None</em><span class="sig-paren">)</span><a class="headerlink" href="#deeprank.generate.GridTools.GridTools" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Map the feature of a complex on the grid.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>molgrp</strong> (<em>str</em>) â name of the group of the molecule in the HDF5 file</li>
<li><strong>number_of_points</strong> (<em>int</em><em>, </em><em>optional</em>) â number of points we want in each direction of the grid</li>
<li><strong>resolution</strong> (<em>float</em><em>, </em><em>optional</em>) â distance (in Angs) between two points</li>
<li><strong>atomic_densities</strong> (<em>dict</em><em>, </em><em>optional</em>) â dictionary of atom types cand their vdw radius exemple {âCAâ:3.5, âCBâ:3.0}</li>
<li><strong>atomic_densities_mode</strong> (<em>str</em><em>, </em><em>optional</em>) â Mode for mapping (deprecated must be âindâ)</li>
<li><strong>feature</strong> (<em>None</em><em>, </em><em>optional</em>) â Name of the features to be mapped. By default all the features present in hdf5_file[â&lt;molgrp&gt;/features/] will be mapped</li>
<li><strong>feature_mode</strong> (<em>str</em><em>, </em><em>optional</em>) â Mode for mapping (deprecated must be âindâ)</li>
<li><strong>contact_distance</strong> (<em>float</em><em>, </em><em>optional</em>) â the dmaximum distance between two contact atoms default 8.5 A</li>
<li><strong>hdf5_file</strong> (<em>str</em><em>, </em><em>optional</em>) â the file handler of th HDF5 file where to store the grids</li>
<li><strong>cuda</strong> (<em>bool</em><em>, </em><em>optional</em>) â Use CUDA or not</li>
<li><strong>gpu_block</strong> (<em>tuple</em><em>(</em><em>int</em><em>)</em><em>, </em><em>optional</em>) â GPU block size to use</li>
<li><strong>cuda_func</strong> (<em>None</em><em>, </em><em>optional</em>) â Name of the CUDA function to be used for the mapping of the features. Must be present in kernel_cuda.c</li>
<li><strong>cuda_atomic</strong> (<em>None</em><em>, </em><em>optional</em>) â Name of the CUDA function to be used for the mapping of the atomic densities. Must be present in kernel_cuda.c</li>
<li><strong>prog_bar</strong> (<em>bool</em><em>, </em><em>optional</em>) â print progression bar for individual grid (default False)</li>
<li><strong>time</strong> (<em>bool</em><em>, </em><em>optional</em>) â print timimg statistic for individual grid (default False)</li>
<li><strong>try_sparse</strong> (<em>bool</em><em>, </em><em>optional</em>) â Try to store the matrix in sparse format (default True)</li>
<li><strong>logger</strong> (<em>None</em><em>, </em><em>optional</em>) â logger</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="deeprank.generate.GridTools.GridTools.create_new_data">
<code class="descname">create_new_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#deeprank.generate.GridTools.GridTools.create_new_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Create new feature for a given complex.</p>
</dd></dl>

<dl class="method">
<dt id="deeprank.generate.GridTools.GridTools.update_feature">
<code class="descname">update_feature</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#deeprank.generate.GridTools.GridTools.update_feature" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Update existing feature in a complex.</p>
</dd></dl>

<dl class="method">
<dt id="deeprank.generate.GridTools.GridTools.read_pdb">
<code class="descname">read_pdb</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#deeprank.generate.GridTools.GridTools.read_pdb" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Create a sql databse for the pdb.</p>
</dd></dl>

<dl class="method">
<dt id="deeprank.generate.GridTools.GridTools.get_contact_atoms">
<code class="descname">get_contact_atoms</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#deeprank.generate.GridTools.GridTools.get_contact_atoms" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get the contact atoms.</p>
</dd></dl>

<dl class="method">
<dt id="deeprank.generate.GridTools.GridTools.add_all_features">
<code class="descname">add_all_features</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#deeprank.generate.GridTools.GridTools.add_all_features" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Add all the features toa given molecule.</p>
</dd></dl>

<dl class="method">
<dt id="deeprank.generate.GridTools.GridTools.add_all_atomic_densities">
<code class="descname">add_all_atomic_densities</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#deeprank.generate.GridTools.GridTools.add_all_atomic_densities" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Add all atomic densities.</p>
</dd></dl>

<dl class="method">
<dt id="deeprank.generate.GridTools.GridTools.define_grid_points">
<code class="descname">define_grid_points</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#deeprank.generate.GridTools.GridTools.define_grid_points" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Define the grid points.</p>
</dd></dl>

<dl class="method">
<dt id="deeprank.generate.GridTools.GridTools.map_atomic_densities">
<code class="descname">map_atomic_densities</code><span class="sig-paren">(</span><em>only_contact=True</em><span class="sig-paren">)</span><a class="headerlink" href="#deeprank.generate.GridTools.GridTools.map_atomic_densities" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Map the atomic densities to the grid</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>only_contact</strong> (<em>bool</em><em>, </em><em>optional</em>) â Map only the contact atoms</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ImportError</span></code> â Description</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="deeprank.generate.GridTools.GridTools.densgrid">
<code class="descname">densgrid</code><span class="sig-paren">(</span><em>center</em>, <em>vdw_radius</em><span class="sig-paren">)</span><a class="headerlink" href="#deeprank.generate.GridTools.GridTools.densgrid" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Function to map individual atomic density on the grid.</p>
<p>The formula is equation (1) of the Koes paper
Protein-Ligand Scoring with Convolutional NN Arxiv:1612.02751v1</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>center</strong> (<em>list</em><em>(</em><em>float</em><em>)</em>) â position of the atoms</li>
<li><strong>vdw_radius</strong> (<em>float</em>) â vdw radius of the atom</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">np.array (mapped density)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">TYPE</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="deeprank.generate.GridTools.GridTools.map_features">
<code class="descname">map_features</code><span class="sig-paren">(</span><em>featlist</em>, <em>transform=None</em><span class="sig-paren">)</span><a class="headerlink" href="#deeprank.generate.GridTools.GridTools.map_features" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Map individual feature to the grid.</p>
<p>For residue based feature the feature file must be of the format
chainID    residue_name(3-letter)     residue_number     [values]</p>
<p>For atom based feature it must be
chainID    residue_name(3-letter)     residue_number   atome_name  [values]</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>featlist</strong> (<em>list</em><em>(</em><em>str</em><em>)</em>) â list of features to be mapped</li>
<li><strong>transform</strong> (<em>callable</em><em>, </em><em>optional</em>) â transformation of the feature (?)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Mapped features</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first">np.array</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ImportError</span></code> â Description</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> â Description</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="deeprank.generate.GridTools.GridTools.featgrid">
<code class="descname">featgrid</code><span class="sig-paren">(</span><em>center</em>, <em>value</em>, <em>type_='fast_gaussian'</em><span class="sig-paren">)</span><a class="headerlink" href="#deeprank.generate.GridTools.GridTools.featgrid" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Map an individual feature (atomic or residue) on the grid</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>center</strong> (<em>list</em><em>(</em><em>float</em><em>)</em>) â position of the feature center</li>
<li><strong>value</strong> (<em>float</em>) â value of the feature</li>
<li><strong>type</strong> (<em>str</em><em>, </em><em>optional</em>) â method to map</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Mapped feature</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first">np.array</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> â Description</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="deeprank.generate.GridTools.GridTools.export_grid_points">
<code class="descname">export_grid_points</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#deeprank.generate.GridTools.GridTools.export_grid_points" title="Permalink to this definition">Â¶</a></dt>
<dd><p>export the grid points to the hdf5 file.</p>
</dd></dl>

<dl class="method">
<dt id="deeprank.generate.GridTools.GridTools.hdf5_grid_data">
<code class="descname">hdf5_grid_data</code><span class="sig-paren">(</span><em>dict_data</em>, <em>data_name</em><span class="sig-paren">)</span><a class="headerlink" href="#deeprank.generate.GridTools.GridTools.hdf5_grid_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Save the mapped feature to the hdf5 file</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>dict_data</strong> (<em>dict</em>) â feature values stored as a dict</li>
<li><strong>data_name</strong> (<em>str</em>) â feature name</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">Table Of Contents</a></h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">First Steps with DeepRank</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial : Data Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_deeplearning.html">Tutorial : Deep learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="advTuto.html">Advanced Tutorial</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Generate Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-deeprank.generate.DataGenerator">DataGenerator</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-deeprank.generate.NormalizeData">NormalizeData</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-deeprank.generate.GridTools">GridTools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="deeprank.learn.html">Deep learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="deeprank.features.html">Feature</a></li>
<li class="toctree-l1"><a class="reference internal" href="deeprank.tools.html">Tools</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="advTuto.html"
                        title="previous chapter">Advanced Tutorial</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="deeprank.learn.html"
                        title="next chapter">Deep learning</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/deeprank.generate.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="deeprank.learn.html" title="Deep learning"
             >next</a> |</li>
        <li class="right" >
          <a href="advTuto.html" title="Advanced Tutorial"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">DeepRank 0.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Nicolas Renaud.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.6.
    </div>
  </body>
</html>